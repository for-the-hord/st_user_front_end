(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7feec5e8","chunk-2d217c1d"],{"0848":function(e,t,r){"use strict";r("648d")},"648d":function(e,t,r){},"64eb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("d2-container",[t("div",{staticClass:"Aone-page-renzheng"},[t("p",{staticStyle:{color:"gray",cursor:"pointer"}},[e._v(" 机构评测 > "),t("span",{on:{click:function(t){return e.goback()}}},[e._v(" 我的机构 ")]),e._v(" > "),t("span",{staticStyle:{color:"black"}},[e._v(" 机构添加")])]),t("div",{staticClass:"renzheng2"},[t("h1",{staticClass:"weights",staticStyle:{"margin-left":"70px","font-size":"20px"}},[e._v("机构认证")]),t("br"),t("div",{staticClass:"new_renzheng"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"机构名称：",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"社会统一信用代码：",prop:"code"}},[t("el-input",{model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),t("el-form-item",{attrs:{label:"详细地址：",prop:"address"}},[t("el-input",{model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),t("el-form-item",{attrs:{label:"省份",prop:"pro"}},[t("el-select",{attrs:{placeholder:"请选择省份"},on:{change:e.get_city},model:{value:e.ruleForm.pro,callback:function(t){e.$set(e.ruleForm,"pro",t)},expression:"ruleForm.pro"}},e._l(e.pro_list,(function(e){return t("el-option",{attrs:{label:e.name,code:e.code,value:e.code}})})),1)],1),t("el-form-item",{attrs:{label:"地市",prop:"city"}},[t("el-select",{attrs:{placeholder:"请选择地市"},on:{change:e.get_xian},model:{value:e.ruleForm.city,callback:function(t){e.$set(e.ruleForm,"city",t)},expression:"ruleForm.city"}},e._l(e.city_list,(function(e){return t("el-option",{attrs:{label:e.name,value:e.code}})})),1)],1),t("el-form-item",{attrs:{label:"县区",prop:"xian"}},[t("el-select",{attrs:{placeholder:"请选择县区"},model:{value:e.ruleForm.xian,callback:function(t){e.$set(e.ruleForm,"xian",t)},expression:"ruleForm.xian"}},e._l(e.xian_list,(function(e){return t("el-option",{attrs:{label:e.name,value:e.code}})})),1)],1),t("el-form-item",{attrs:{label:"机构人数：",prop:"total_user"}},[t("el-input",{model:{value:e.ruleForm.total_user,callback:function(t){e.$set(e.ruleForm,"total_user",t)},expression:"ruleForm.total_user"}})],1),t("el-form-item",{attrs:{label:"机构职称信息录入："}},[t("p",{staticClass:"thead flex_center_around",staticStyle:{width:"55%"}},[t("span",[e._v(" 职称名称 ")]),t("span",[e._v(" 人数 ")])]),e._l(e.work_list,(function(r,a){return t("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[t("div",{staticStyle:{width:"35%",float:"left"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:r.type,callback:function(t){e.$set(r,"type",t)},expression:"item.type"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticStyle:{width:"15%",float:"left"}},[t("el-input",{attrs:{type:"number"},model:{value:r.value,callback:function(t){e.$set(r,"value",t)},expression:"item.value"}})],1),t("div",{staticClass:"pointer",staticStyle:{width:"15%","margin-left":"20px",float:"left"}},[a==e.work_list.length-1?t("i",{staticClass:"el-icon-plus",on:{click:function(t){return e.add_item()}}}):e._e(),0!=a?t("i",{staticClass:"el-icon-minus",staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.del_item(a)}}}):e._e()])])}))],2),t("el-form-item",[t("el-button",{staticStyle:{float:"right"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")]),t("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary_test"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交认证")])],1)],1)],1)])])])},n=[],l=(r("00e5"),r("ed70"),r("c7a4")),i={name:"mine",data(){var e=(e,t,r)=>{t?(t.length<2&&r(new Error("请确保长度在2-8位")),/^[a-zA-Z0-9\u4e00-\u9fa5]*[\u4e00-\u9fa5][a-zA-Z0-9]*$/.test(t)?r():r(new Error("请确保不能为纯数字或者特殊字符"))):r()},t=(e,t,r)=>{t?/^[a-zA-Z0-9\u4e00-\u9fa5]*[\u4e00-\u9fa5][a-zA-Z0-9]*$/.test(t)?r():r(new Error("请确保不能为纯数字或者特殊字符")):r()};return{pro_list:[],city_list:[],xian_list:[],next:!0,work_list:[{type:"",value:""}],options:[{label:"助理级",value:"1"},{label:"中级",value:"2"},{label:"副高级",value:"3"},{label:"正高级",value:"4"}],points:"",ruleForm:{name:"",code:"",description:"",area_id:"",address:"",type:1,total_user:"",title:[],pro:"",city:"",xian:""},rules:{name:[{validator:e,trigger:"blur"}],address:[{validator:t,trigger:"blur"}],code:[{required:!0,message:"请输入",trigger:"blur"}],description:[{required:!0,message:"请输入",trigger:"blur"}],type:[{required:!0,message:"请输入",trigger:"blur"}],total_user:[{required:!0,message:"请输入",trigger:"blur"}]}}},created(){Object(l["new_area"])().then(e=>{console.log(e,"area"),this.pro_list=e.data})},watch:{visible(e,t){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},methods:{goback(){this.$router.go(-1)},goback2(){this.$router.go(-2)},add_item(){this.work_list.push({type:"",value:""})},del_item(e){this.work_list.splice(e,1)},get_city(e){Object(l["new_area2"])(e).then(e=>{this.city_list=e.data})},get_xian(e){Object(l["new_area2"])(e).then(e=>{this.xian_list=e.data})},submitForm(e){this.$refs[e].validate(e=>!!e&&(this.ruleForm.pro?(this.ruleForm.title=this.work_list,this.ruleForm.xian&&(this.ruleForm.area_id=this.ruleForm.xian),!this.ruleForm.xian&&this.ruleForm.city&&(this.ruleForm.area_id=this.ruleForm.city),!this.ruleForm.pro||this.ruleForm.xian||this.ruleForm.city||(this.ruleForm.area_id=this.ruleForm.pro),this.ruleForm.title.map(e=>{e.type=parseInt(e.type),e.value=parseInt(e.value)}),void Object(l["new_agency"])(this.ruleForm).then(e=>{this.$router.push({path:"/agency/mine"})})):(this.$message.warning("请至少选择省份"),!1)))},resetForm(e){this.$refs[e].resetFields(),this.$router.push({path:"/agency/mine"})},openMenu(e,t){var r=e.pageX,a=e.pageY;this.top=a,this.left=r,this.visible=!0},closeMenu(){this.visible=!1}}},o=i,s=(r("0848"),r("e607")),u=function(e){e.options.__source="src/views/agency/add.vue"},c=u,d=Object(s["a"])(o,a,n,!1,null,"b09c958a",null);"function"===typeof c&&c(d);t["default"]=d.exports},c7a4:function(e,t,r){"use strict";r.r(t),r.d(t,"new_agency",(function(){return n})),r.d(t,"new_agency2",(function(){return l})),r.d(t,"new_area",(function(){return i})),r.d(t,"new_area2",(function(){return o})),r.d(t,"process",(function(){return s})),r.d(t,"process2",(function(){return u})),r.d(t,"getagency",(function(){return c})),r.d(t,"process3",(function(){return d})),r.d(t,"target",(function(){return m})),r.d(t,"target2",(function(){return p})),r.d(t,"score",(function(){return f})),r.d(t,"detail",(function(){return h})),r.d(t,"dels",(function(){return g})),r.d(t,"editAgency",(function(){return b}));var a=r("dd88");r("86ba");function n(e){return Object(a["a"])({url:"/api/agency/",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/api/agency/",method:"get"})}function i(e){return Object(a["a"])({url:"/api/system/area/?code=100000",method:"get"})}function o(e){return Object(a["a"])({url:"/api/system/area/?code="+e,method:"get"})}function s(e){return Object(a["a"])({url:"/api/agency/process/",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/api/agency/process/",method:"get",params:e})}function c(e){return Object(a["a"])({url:`/api/agency/${e}/`,method:"get"})}function d(e){return Object(a["a"])({url:"/api/agency/process/",method:"put",params:e})}function m(e){return Object(a["a"])({url:"/api/agency/target/",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/api/agency/target/",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/api/agency/target/score/",method:"get",params:e})}function h(e){return Object(a["a"])({url:`/api/agency/process/detail/${e}/`,method:"get"})}function g(e){return Object(a["a"])({url:`/api/agency/${e}/`,method:"DELETE"})}function b(e,t){return Object(a["a"])({url:`/api/agency/${t}/`,method:"put",data:e})}}}]);
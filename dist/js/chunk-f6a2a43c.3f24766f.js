(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6a2a43c","chunk-2d217c5f"],{c7c8:function(e,t,n){"use strict";n.r(t),n.d(t,"new_agency",(function(){return r})),n.d(t,"new_agency2",(function(){return i})),n.d(t,"new_area",(function(){return o})),n.d(t,"new_area2",(function(){return l})),n.d(t,"process",(function(){return s})),n.d(t,"process2",(function(){return u})),n.d(t,"getagency",(function(){return c})),n.d(t,"process3",(function(){return d})),n.d(t,"target",(function(){return p})),n.d(t,"target2",(function(){return m})),n.d(t,"score",(function(){return f})),n.d(t,"detail",(function(){return g})),n.d(t,"dels",(function(){return h})),n.d(t,"puts",(function(){return b})),n.d(t,"getquestion",(function(){return v})),n.d(t,"getcourse",(function(){return _})),n.d(t,"getability",(function(){return y})),n.d(t,"postquestion",(function(){return w})),n.d(t,"putquestion",(function(){return I})),n.d(t,"deletequestion",(function(){return x})),n.d(t,"paperList",(function(){return k})),n.d(t,"paperDelete",(function(){return $})),n.d(t,"paperEdit",(function(){return j})),n.d(t,"paperRevoke",(function(){return O})),n.d(t,"paperCreate",(function(){return S})),n.d(t,"paperQuestion",(function(){return D})),n.d(t,"paperQuestion2",(function(){return C})),n.d(t,"getpaper",(function(){return R})),n.d(t,"postpaper",(function(){return q})),n.d(t,"getpapermine",(function(){return F})),n.d(t,"getresult",(function(){return E})),n.d(t,"getid",(function(){return T})),n.d(t,"get_look",(function(){return B})),n.d(t,"top_one",(function(){return L}));var a=n("dd88");n("86ba");function r(e){return Object(a["a"])({url:"/api/agency/",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/api/agency/",method:"get"})}function o(e){return Object(a["a"])({url:"/api/system/area/?code=100000",method:"get"})}function l(e){return Object(a["a"])({url:"/api/system/area/?code="+e,method:"get"})}function s(e){return Object(a["a"])({url:"/api/agency/process/",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/api/agency/process/",method:"get",params:e})}function c(e){return Object(a["a"])({url:`/api/agency/${e}/`,method:"get"})}function d(e){return Object(a["a"])({url:"/api/agency/process/",method:"put",params:e})}function p(e){return Object(a["a"])({url:"/api/agency/target/",method:"get",params:e})}function m(e){return Object(a["a"])({url:"/api/agency/target/",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/api/agency/target/score/",method:"get",params:e})}function g(e){return Object(a["a"])({url:`/api/agency/process/detail/${e}/`,method:"get"})}function h(e){return Object(a["a"])({url:`/api/agency/${e}/`,method:"DELETE"})}function b(e){return Object(a["a"])({url:`/api/agency/${e}/`,method:"put"})}function v(e){return Object(a["a"])({url:"/api/exam/question/",method:"get",params:e})}function _(e){return Object(a["a"])({url:"/api/exam/course/",method:"get"})}function y(e){return Object(a["a"])({url:"/api/exam/ability/",method:"get"})}function w(e){return Object(a["a"])({url:"/api/exam/question/",method:"post",data:e})}function I(e,t){return Object(a["a"])({url:"/api/exam/question/"+e+"/",method:"put",data:t})}function x(e){return Object(a["a"])({url:`/api/exam/question/${e}/`,method:"DELETE"})}function k(e){return Object(a["a"])({url:"/api/exam/paper/",method:"get",params:e})}function $(e){return Object(a["a"])({url:`/api/exam/paper/${e}/`,method:"delete"})}function j(e,t){return Object(a["a"])({url:`/api/exam/paper/${e}/`,method:"put",data:t})}function O(e,t){return Object(a["a"])({url:`/api/exam/paper/${e}/`,method:"patch",data:t})}function S(e){return Object(a["a"])({url:"/api/exam/paper/",method:"post",data:e})}function D(e,t){return Object(a["a"])({url:`/api/exam/paper_question/${e}/`,method:"get",params:t})}function C(e,t){return Object(a["a"])({url:`/api/exam/paper_question/${e}/`,method:"put",data:t})}function R(){return Object(a["a"])({url:"/api/exam/paper/",method:"get"})}function q(e,t){return Object(a["a"])({url:`/api/exam/mine/${e}/`,method:"post",data:t})}function F(){return Object(a["a"])({url:"/api/exam/mine/",method:"get"})}function E(e){return Object(a["a"])({url:`/api/exam/result/${e}/`,method:"get"})}function T(e){return Object(a["a"])({url:"/api/exam/mine/",method:"post",data:e})}function B(e){return Object(a["a"])({url:`/api/exam/mine/${e}/`,method:"get"})}function L(e){return Object(a["a"])({url:`/api/exam/paper_score/${e}/`,method:"get"})}},f4ac:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("d2-container",[t("div",{staticClass:"Aone-page"},[t("div",{staticClass:"jigou"},[t("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.rules}},[t("el-form-item",{attrs:{label:"试卷名称：",prop:"content"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入试卷名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),t("el-form-item",{attrs:{label:"试卷等级："}},[t("el-select",{attrs:{prop:"degree",clearable:"",placeholder:"请选择试卷状态"},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[t("el-option",{attrs:{label:"全部",value:"0"}}),t("el-option",{attrs:{label:"低",value:"1"}}),t("el-option",{attrs:{label:"中",value:"2"}}),t("el-option",{attrs:{label:"高",value:"3"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}}},[e._v("查询")]),t("el-button",{attrs:{type:"primary_test"},on:{click:function(t){return e.resetForm("formInline")}}},[e._v("重置")]),t("el-button",{attrs:{type:"primary_test",icon:"el-icon-plus"},on:{click:function(t){return e.addRow()}}},[e._v("添加试卷")])],1)],1)],1),t("div",{staticClass:"qd-table",staticStyle:{position:"relative",margin:"0 auto"}},[e.tableInfo.data?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",color:"white"},attrs:{data:e.tableInfo.data,"header-cell-style":e.header_style,"cell-style":e.body_style},on:{"cell-mouse-enter":e.hover_table_lds,"row-click":e.goDetail,"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"name",label:"试卷名称","cell-style":e.timeStyle},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"chaohcu",staticStyle:{cursor:"pointer",color:"white"}},[e._v(" "+e._s(n.row.name))])]}}],null,!1,1686034959)}),t("el-table-column",{attrs:{prop:"score",label:"试卷等级"},scopedSlots:e._u([{key:"default",fn:function(n){return[0==n.row.level?t("span",{staticStyle:{cursor:"pointer"}},[e._v("---")]):e._e(),1==n.row.level?t("span",{staticStyle:{cursor:"pointer"}},[e._v("低")]):e._e(),2==n.row.level?t("span",{staticStyle:{cursor:"pointer"}},[e._v("中")]):e._e(),3==n.row.level?t("span",{staticStyle:{cursor:"pointer"}},[e._v("高")]):e._e()]}}],null,!1,4204776482)}),t("el-table-column",{attrs:{prop:"revoked",label:"试卷状态","cell-style":e.timeStyle},scopedSlots:e._u([{key:"default",fn:function(n){return[0==n.row.revoked?t("el-tag",{attrs:{type:"success"},on:{click:function(t){return e.revokeRow(n.row,1)}}},[e._v("启用")]):t("el-tag",{attrs:{type:"danger"},on:{click:function(t){return e.revokeRow(n.row,0)}}},[e._v("禁用")])]}}],null,!1,534039199)}),t("el-table-column",{attrs:{prop:"begin_date",label:"考核时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getTime(t.row.begin_date))+" ")]}}],null,!1,1596208819)}),t("el-table-column",{attrs:{prop:"duration",label:"考核时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.duration)+" min ")]}}],null,!1,2297192841)}),t("el-table-column",{attrs:{prop:"state",label:"考核状态","cell-style":e.timeStyle},scopedSlots:e._u([{key:"default",fn:function(n){return[1==n.row.state?t("span",{staticStyle:{cursor:"pointer"}},[e._v(" 待考核")]):e._e(),2==n.row.state?t("span",{staticStyle:{cursor:"pointer"}},[e._v(" 考核中")]):e._e(),3==n.row.state?t("span",{staticStyle:{cursor:"pointer"}},[e._v(" 已完成")]):e._e()]}}],null,!1,1875233063)}),t("el-table-column",{attrs:{label:"试卷题目",width:"200"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{icon:"el-icon-edit",round:"",size:"mini",type:"warning",plain:""},on:{click:function(t){return e.updateRow(n.row)}}},[e._v("操作")]),t("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-view",plain:"",type:"primary"},on:{click:function(t){return e.updateRow2(n.row)}}},[e._v("查看")])]}}],null,!1,978490510)}),t("el-table-column",{attrs:{prop:"add_user",label:"修改人"}}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("i",{staticClass:"m_spans_table_normal",on:{click:function(t){return e.editRow(n.row)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("i",{staticClass:"m_spans_table_normal",on:{click:function(t){return e.deleteRow(n.row)}}},[e._v("删除")]),t("el-divider",{attrs:{direction:"vertical"}}),t("i",{staticClass:"m_spans_table_normal",on:{click:function(t){return e.viewRow(n.row)}}},[e._v("查看")])]}}],null,!1,1194677674)})],1):e._e()],1),t("br"),t("div",{staticClass:"block qd-table"},[e.tableInfo.data.length>1?t("el-pagination",{attrs:{"current-page":e.currentPage_present,"page-size":10,layout:"prev, pager, next, jumper",total:e.tableInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage_present=t},"update:current-page":function(t){e.currentPage_present=t}}}):e._e()],1),e.tableInfo.data.length<1?t("div",{staticStyle:{wdith:"100%",color:"white",margin:"200px auto","text-align":"center"}},[t("br"),t("span",{staticClass:"zanwu",staticStyle:{color:"gray"}},[e._v(" 暂无数据")])]):e._e()]),t("qd-dialog",{attrs:{title:e.dialogInfo2.title,visible:e.dialogInfo2.visible,width:e.dialogInfo2.width,"bt-loading":e.dialogInfo2.btLoading,nofooter:!0},on:{"update:visible":function(t){return e.$set(e.dialogInfo2,"visible",t)}}},[t("el-form",{ref:"formInline2",staticClass:"demo-form-inline lds_form",attrs:{model:e.formInline2,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"试卷名称："}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入试卷名称",disabled:e.isDisabled},model:{value:e.formInline2.name,callback:function(t){e.$set(e.formInline2,"name",t)},expression:"formInline2.name"}})],1),t("el-form-item",{attrs:{label:"试卷总分："}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入试卷总分",type:"numer",min:"0",max:"100",disabled:e.isDisabled},model:{value:e.formInline2.score,callback:function(t){e.$set(e.formInline2,"score",t)},expression:"formInline2.score"}})],1),t("el-form-item",{attrs:{label:"考核时长："}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入试考核时长（单位：分）",type:"numer",min:"0",disabled:e.isDisabled},model:{value:e.formInline2.duration,callback:function(t){e.$set(e.formInline2,"duration",t)},expression:"formInline2.duration"}})],1),t("el-form-item",{attrs:{label:"考核时间："}},[t("el-date-picker",{attrs:{type:"datetime","value-format":e.valueFormat,placeholder:"开始时间",format:"yyyy-MM-dd HH:mm",disabled:e.isDisabled},on:{change:e.beginChange},model:{value:e.paperBegin,callback:function(t){e.paperBegin=t},expression:"paperBegin"}}),t("span",{staticStyle:{color:"black","margin-left":"10px","margin-right":"10px"}},[e._v("至")]),t("el-date-picker",{attrs:{type:"datetime","value-format":e.valueFormat,placeholder:"截止时间",format:"yyyy-MM-dd HH:mm",disabled:e.isDisabled},on:{change:e.endChange},model:{value:e.paperEnd,callback:function(t){e.paperEnd=t},expression:"paperEnd"}})],1),t("el-form-item",{attrs:{label:"试卷备注：",prop:"content"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{rows:4,type:"textarea",clearable:"",placeholder:"请输入试卷名称",disabled:e.isDisabled},model:{value:e.formInline2.remark,callback:function(t){e.$set(e.formInline2,"remark",t)},expression:"formInline2.remark"}})],1),t("el-form-item",[e.visit<3?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitRow("formInline2")}}},[e._v("提交")]):e._e(),t("el-button",{attrs:{type:"primary_test"},on:{click:function(t){return e.resetForm("formInline2")}}},[e._v("取消")])],1)],1)],1)],1)},r=[],i=(n("ed70"),n("c7c8")),o={name:"Paper",props:{valueFormat:{type:String,default:"timestamp"}},data(){return{tableInfo:{data:[],total:0},formInline:{name:"",level:0,page:1,limit:10,code:1},dialogInfo2:{title:"",visible:!1,width:"50%",btLoading:!1},formInline2:{name:"",score:"",duration:"",begin_date:"",end_date:"",remark:""},paperBegin:"",paperEnd:"",visit:1,rules:{name:[{required:!0,message:"请输入试卷名称",trigger:"blur"}],score:[{required:!0,message:"请输入试卷总分",trigger:"blur"}],duration:[{required:!0,message:"请输入考试时长",trigger:"blur"}],paperDate:[{required:!0,message:"请选择考核时间",trigger:"blur"}]},isDisabled:!1,paperId:0}},created(){this.fetch()},methods:{fetch(){this.tableInfo.data=[],this.tableInfo.total=0,Object(i["paperList"])(this.formInline).then(e=>{200==e.code?this.tableInfo=e.data:this.$message.error("系统异常")})},revokeRow(e,t){let n=new Date,a=parseInt((n.getTime()/1e3).toFixed());if(a>e.begin_date)return void this.$message.warning("评测已开始，暂不可操作！");let r=1===t?"禁用":"启用";this.$confirm(`确定要${r}评测试卷 <span style="color: red">${e.name}</span> 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,type:"warning",dangerouslyUseHTMLString:!0}).then(()=>{let n={revoked:t};Object(i["paperRevoke"])(e.id,n).then(e=>{200==e.code?(this.$message.success("操作成功！"),this.fetch()):this.$message.error("操作失败！")})}).catch(()=>{this.$message.info("操作已取消")})},resetForm(e){console.log(e),this.dialogInfo2.visible=!1},addRow(){this.visit=1,this.dialogInfo2.title="添加试卷",this.dialogInfo2.visible=!0,this.initForm(),this.isDisabled=!1},editRow(e){let t=new Date,n=parseInt((t.getTime()/1e3).toFixed());n>e.begin_date?this.$message.warning("评测已开始，暂不可编辑！"):(this.visit=2,this.paperId=e.id,this.dialogInfo2.title="试卷编辑",this.dialogInfo2.visible=!0,this.isDisabled=!1,this.initForm(),this.formInline2={...e},this.paperBegin=1e3*e.begin_date,this.paperEnd=1e3*e.end_date)},editRow2(e){let t=new Date,n=parseInt((t.getTime()/1e3).toFixed());n>e.begin_date?this.$message.warning("评测已开始，暂不可编辑！"):(this.visit=2,this.paperId=e.id,this.dialogInfo2.title="试卷编辑",this.dialogInfo2.visible=!0,this.isDisabled=!1,this.initForm(),this.formInline2={...e},this.paperBegin=1e3*e.begin_date,this.paperEnd=1e3*e.end_date)},viewRow(e){this.visit=3,this.dialogInfo2.title="试卷详情",this.dialogInfo2.visible=!0,this.isDisabled=!0,this.initForm(),this.formInline2={...e},this.paperBegin=1e3*e.begin_date,this.paperEnd=1e3*e.end_date},updateRow(e){let t=new Date,n=parseInt((t.getTime()/1e3).toFixed());n>e.begin_date?this.$message.warning("评测已开始，暂不可操作！"):e.exist?this.$message.warning("试卷已完成，暂不可操作！"):this.$router.push({path:"/exam/paper/detail",query:{paperId:e.id}})},updateRow2(e){e.exist?this.$router.push({path:"/exam/paper/detail2",query:{paperId:e.id}}):this.$message.warning("试卷未完成选题！")},deleteRow(e){let t=new Date,n=parseInt((t.getTime()/1e3).toFixed());n>e.begin_date?this.$message.warning("评测已开始，暂不可删除！"):this.$confirm(`确定要删除<span style="color: red">${e.name}</span>吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,type:"warning",dangerouslyUseHTMLString:!0}).then(()=>{Object(i["paperDelete"])(e.id).then(e=>{200==e.code?this.$message.success("操作成功"):this.$message.error("操作失败")})}).catch(()=>{this.$message.info("操作已取消")})},submitRow(e){this.$refs[e].validate(e=>{e&&(1==this.visit?Object(i["paperCreate"])(this.formInline2).then(e=>{200==e.code?(this.$message.success("添加成功"),this.fetch(),this.dialogInfo2.visible=!1):this.$message.error("添加失败")}):2==this.visit?Object(i["paperEdit"])(this.paperId,this.formInline2).then(e=>{200==e.code?(this.$message.success("编辑成功"),this.dialogInfo2.visible=!1):this.$message.error("编辑失败")}):this.$message.error("错误的操作"))})},beginChange(){this.formInline2.begin_date=this.paperBegin/1e3||0},endChange(){this.formInline2.end_date=this.paperEnd/1e3||0},initForm(){this.formInline2={name:"",score:"",duration:"",begin_date:"",end_date:"",remark:""}},getTime(e){var t=new Date(1e3*parseInt(e)),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return a=1==a.toString().length?"0"+a:a,r=1==r.toString().length?"0"+r:r,n+"-"+a+"-"+r+" "}}},l=o,s=n("e607"),u=function(e){e.options.__source="src/views/exam/paper.vue"},c=u,d=Object(s["a"])(l,a,r,!1,null,"3db836f0",null);"function"===typeof c&&c(d);t["default"]=d.exports}}]);
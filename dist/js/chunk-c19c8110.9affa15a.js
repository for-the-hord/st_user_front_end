(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c19c8110"],{"0b01e":function(e,t,s){e.exports=s.p+"img/f.1a333dd0.png"},5731:function(e,t,s){},b5ba:function(e,t,s){"use strict";s("5731")},cb48:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-login"},[t("div",{staticClass:"page-login--layer"},[t("div",{staticClass:"page-login--content",staticStyle:{background:"#0b1322"},attrs:{flex:"dir:top main:justify cross:stretch box:justify"}},[t("div",{staticClass:"page-login--content-main",attrs:{flex:"dir:top main:center cross:center;"}},[e._m(0),t("div",{staticClass:"page-login--form"},[t("el-card",{attrs:{shadow:"never"}},[t("br"),t("br"),t("br"),t("br"),t("br"),t("el-form",{ref:"loginForm",attrs:{"label-position":"top",rules:e.rules,model:e.formLogin,size:"default"}},[t("br"),t("el-form-item",{attrs:{prop:"username"}},[t("el-select",{attrs:{placeholder:"请选择单位"},on:{change:e.set_change},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.id}},[t("i",{staticClass:"el-icon-user",staticStyle:{color:"#fff"},attrs:{slot:"prepend"},slot:"prepend"})])})),1)],1),t("br"),t("el-form-item",{attrs:{prop:"password"}},[t("el-date-picker",{attrs:{"value-format":"timestamp",type:"date",placeholder:"选择填报日期"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}})],1),t("br"),t("br"),t("el-button",{staticClass:"button-login",staticStyle:{background:"#0db8ba",color:"white",border:"none !important","font-size":"16px"},attrs:{size:"default"},on:{click:e.submit}},[e._v(" 登 录 ")])],1)],1)],1)]),e._m(1)])]),t("el-dialog",{attrs:{title:"快速选择用户",visible:e.dialogVisible,width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-row",{staticStyle:{margin:"-20px 0px -10px 0px"},attrs:{gutter:10}},e._l(e.users,(function(s,i){return t("el-col",{key:i,attrs:{span:8}},[t("div",{staticClass:"page-login--quick-user",on:{click:function(t){return e.handleUserBtnClick(s)}}},[t("d2-icon",{attrs:{name:"user-circle-o"}}),t("span",[e._v(e._s(s.name))])],1)])})),1)],1)],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"smind_left"},[t("img",{staticClass:"v_video",attrs:{src:s("0b01e")}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-login--content-footer"},[t("p",{staticClass:"page-login--content-footer-copyright"})])}],n=(s("ed70"),s("67b1")),r=s.n(n),o=s("7736"),l=s("1353"),m=s("d017"),u=(s("92d2"),{mixins:[l["a"]],data(){return{options:[],new_name:"",newmenu:[],topmenu:[],allmenu:[],loginType:1,saidemenu_lei:[],saidemenu_lei2:[],saidemenu_lei3:[],checked:!0,timeInterval:null,time:r()().format("HH:mm:ss"),dialogVisible:!1,users:[{name:"",username:"",password:""},{name:"",username:"",password:""},{name:"",username:"",password:""}],formLogin:{username:"",password:"",code:""},rules:{username:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},data_menu:[{icon:null,id:5,mod_order:0,parent_id:0,path:"/index",title:"首页"},{icon:null,id:5,mod_order:1,parent_id:0,path:"/paper",title:"数据管理"}]}},created(){Object(m["k"])().then(e=>{console.log(e,"888888989898"),this.options=e.data})},mounted(){this.timeInterval=setInterval(()=>{this.refreshTime()},1e3)},beforeDestroy(){clearInterval(this.timeInterval),this.timeInterval=null},watch:{checked:{handler(e,t){if(e){localStorage.setItem("username",this.formLogin.username),localStorage.setItem("password",this.formLogin.password);var s=localStorage.getItem("username"),i=localStorage.getItem("password");this.formLogin.username=s,this.formLogin.password=i}else localStorage.setItem("username",""),localStorage.setItem("password","")},immediate:!0,deep:!0}},methods:{...Object(o["b"])("d2admin/account",["logins"]),refreshTime(){this.time=r()().format("HH:mm:ss")},handleUserBtnClick(e){this.formLogin.username=e.username,this.formLogin.password=e.password,this.submit()},set_change(e,t,s){console.log(e,t,s,"9999"),this.options.map(t=>{e==t.id&&(this.new_name=t.name)})},submit(){this.$refs.loginForm.validate(e=>{e?this.logins({unit_name:this.new_name,date:this.formLogin.password}).then(e=>{console.log(e,"newssss"),this.data_menu.map(e=>{this.allmenu.push(e)}),localStorage.setItem("allmenu",JSON.stringify(this.allmenu)),this.huoqucaidan(),this.$router.push({path:"/"})}):this.$message.error("表单校验失败，请检查")})},huoqucaidan(){this.allmenu&&(this.allmenu.map(e=>{"/system"==e.path&&(this.saidemenu_lei2=e.children,localStorage.setItem("saidemenu_lei2",JSON.stringify(this.saidemenu_lei2))),"/exam"==e.path&&(this.saidemenu_lei=e.children,console.log(this.saidemenu_lei,"saidemenu_leisaidemenu_lei"),localStorage.setItem("saidemenu_lei",JSON.stringify(this.saidemenu_lei))),"/agency"==e.path&&(this.saidemenu_lei3=e.children,console.log(this.saidemenu_lei3,"saidemenu_leisaidemenu_lei3"),localStorage.setItem("saidemenu_lei3",JSON.stringify(this.saidemenu_lei3))),this.topmenu.push(e),this.topmenu.map(e=>{e.children&&delete e.children})}),this.newmenu=[...new Set(this.topmenu)],localStorage.setItem("newmenu",JSON.stringify(this.newmenu)),this.$store.commit("d2admin/menu/headerSet",JSON.parse(localStorage.getItem("newmenu"))))},forgetPwd(){this.$router.push({path:"/find",query:{loginType:this.loginType}})},registerUser(){this.$router.push({path:"/register",query:{loginType:this.loginType}})}}}),d=u,c=(s("b5ba"),s("e607")),p=function(e){e.options.__source="src/views/system/login/index.vue"},g=p,h=Object(c["a"])(d,i,a,!1,null,"30d50cf0",null);"function"===typeof g&&g(h);t["default"]=h.exports}}]);
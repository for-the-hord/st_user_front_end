(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a960bb4a"],{"3b99":function(e,t,l){"use strict";l("af42e")},8893:function(e,t,l){"use strict";l.r(t);var r=function(){var e=this,t=e._self._c;return t("d2-container",{ref:"",staticStyle:{cursor:"pointer"}},[t("br"),t("br"),t("el-button",{staticClass:"tableHandleBtn",attrs:{size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addModule()}}},[e._v("添加模块 ")]),t("el-button",{staticClass:"tableHandleBtn",attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.refresh()}}},[e._v("刷新 ")]),t("div",{staticClass:"wangpengs"},[t("div",{staticClass:"tabletd_center qd-table"},[t("el-table",{staticStyle:{width:"100%","margin-bottom":"20px","margin-top":"10px",background:"rgba(0, 16, 44, 1)",border:"none !important"},attrs:{data:e.moduleList,"row-key":"id",border:"",center:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"150",align:"center"}}),t("el-table-column",{attrs:{prop:"title",label:"模块名称"}}),t("el-table-column",{attrs:{prop:"id",label:"模块ID",width:"150",align:"center"}}),t("el-table-column",{attrs:{prop:"path",label:"模块路径",align:"center"}}),t("el-table-column",{attrs:{prop:"mod_order",label:"模块排序",width:"150",align:"center"}}),t("el-table-column",{attrs:{label:"模块状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[0==l.row.revoked?t("el-tag",{attrs:{type:"success"},on:{click:function(t){return e.isRevoked(1,l.row.title,l.row.id)}}},[e._v("禁用 ")]):t("el-tag",{attrs:{type:"danger"},on:{click:function(t){return e.isRevoked(0,l.row.title,l.row.id)}}},[e._v("启用")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editModule(l.row)}}},[e._v("编辑")])]}}])})],1)],1)]),t("qd-dialog",{attrs:{label_lds:!0,title:e.moduleDialog.title,visible:e.moduleDialog.visible,width:e.moduleDialog.width,"bt-loading":e.moduleDialog.btLoading},on:{"update:visible":function(t){return e.$set(e.moduleDialog,"visible",t)},handleOk:function(t){return e.submitForm("ruleForm")},quxiao:function(t){return e.cancel()}}},[t("div",{staticClass:"lds_dialog_form"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"模块名称",prop:"title"}},[t("el-input",{attrs:{type:""},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),t("el-form-item",{attrs:{label:"上级模块",prop:"parent_id"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.parent_id,callback:function(t){e.$set(e.ruleForm,"parent_id",t)},expression:"ruleForm.parent_id"}},e._l(e.moduleOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"模块路径",prop:"path"}},[t("el-input",{attrs:{type:""},model:{value:e.ruleForm.path,callback:function(t){e.$set(e.ruleForm,"path",t)},expression:"ruleForm.path"}})],1),t("el-form-item",{attrs:{label:"模块值",prop:"mod_value"}},[t("el-input",{attrs:{type:""},model:{value:e.ruleForm.mod_value,callback:function(t){e.$set(e.ruleForm,"mod_value",t)},expression:"ruleForm.mod_value"}})],1),t("el-form-item",{attrs:{label:"模块排序",prop:"mod_order"}},[t("el-input",{attrs:{type:""},model:{value:e.ruleForm.mod_order,callback:function(t){e.$set(e.ruleForm,"mod_order",t)},expression:"ruleForm.mod_order"}})],1)],1)],1)])],1)},i=[],o=(l("ed70"),l("d017")),a={name:"module",data(){return{moduleId:0,moduleList:[],moduleOptions:[],moduleDialog:{title:"",visible:!1,width:60,btLoading:!1},rules:{name:[{required:!0,validator:"",trigger:"blur"}],parent_id:[{required:!0,validator:"",trigger:"blur"}],path:[{required:!0,validator:"",trigger:"blur"}]},ruleForm:{title:"",parent_id:0,path:"",mod_order:0,mod_value:""}}},methods:{addModule:function(){this.moduleDialog.title="添加模块",this.moduleDialog.visible=!0},editModule:function(e){this.moduleDialog.title="编辑模块",this.moduleDialog.visible=!0,this.ruleForm={...e},this.moduleId=e.id},refresh:function(){this.freshTableList()},freshTableList:function(){Object(o["g"])().then(e=>{let t=e.data;this.moduleList=t,this.moduleOptions=[{value:0,label:"无父级模块"}],t.forEach(e=>{0===e.revoked&&0===e.parent_id&&this.moduleOptions.push({value:e.id,label:e.title})})})},isRevoked:function(e,t,l){let r=0===e?"启用":"禁用";this.$confirm(`确定要${r} <span style="color: red">${t}</span> 模块吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,dangerouslyUseHTMLString:!0}).then(()=>{Object(o["q"])(l,e).then(()=>{this.$message({type:"success",message:"操作成功"}),this.refresh()}).catch(()=>{this.$message({type:"error",message:"操作失败"})})}).catch(()=>{this.$message({type:"info",message:"操作已取消"})})},submitForm(){Object(o["e"])(this.moduleId,this.ruleForm).then(()=>{this.$message({type:"success",message:"操作成功"}),this.refresh()}).catch(()=>{this.$message({type:"error",message:"操作失败"})}).finally(()=>{this.cancel()}),this.moduleId},cancel:function(){this.ruleForm={},this.moduleId=0,this.moduleDialog.title="",this.moduleDialog.visible=!1}},created(){this.freshTableList()}},n=a,s=(l("3b99"),l("e607")),u=function(e){e.options.__source="src/views/admin/module.vue"},d=u,c=Object(s["a"])(n,r,i,!1,null,"27449c82",null);"function"===typeof d&&d(c);t["default"]=c.exports},af42e:function(e,t,l){}}]);
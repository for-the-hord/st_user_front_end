(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ed9f8e7"],{"48aa":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-search",attrs:{flex:"dir:top"}},[t("div",{staticClass:"panel-search__input-group",attrs:{"flex-box":"0",flex:"dir:top main:center cross:center"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handlePanelClick.apply(null,arguments)}}},[t("d2-icon-svg",{staticClass:"panel-search__logo",attrs:{name:"d2-admin-text"}}),t("el-autocomplete",{ref:"input",staticClass:"panel-search__input",attrs:{"suffix-icon":"el-icon-search",placeholder:"搜索页面","fetch-suggestions":e.querySearch,"trigger-on-focus":!1,clearable:!0},on:{select:e.handleSelect},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.handleEsc.apply(null,arguments)}},scopedSlots:e._u([{key:"default",fn:function({item:e}){return t("d2-panel-search-item",{attrs:{item:e}})}}]),model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),t("div",{staticClass:"panel-search__tip"},[e._v(" 您可以使用快捷键 "),t("span",{staticClass:"panel-search__key"},[e._v(e._s(e.hotkey.open))]),e._v(" 唤醒搜索面板，按 "),t("span",{staticClass:"panel-search__key"},[e._v(e._s(e.hotkey.close))]),e._v(" 关闭 ")])],1),e.resultsList.length>0?t("div",{staticClass:"panel-search__results-group",attrs:{"flex-box":"1"}},[t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"panel-search__results-group-inner"},e._l(e.resultsList,(function(s,a){return t("d2-panel-search-item",{key:a,attrs:{item:s,"hover-mode":!0},nativeOn:{click:function(t){return e.handleResultsGroupItemClick(s.path)}}})})),1)])],1):e._e()])},n=[],i=s("4c90"),l=s("7736"),c=s("b55f"),r={mixins:[c["a"]],components:{"d2-panel-search-item":()=>s.e("chunk-0ce79244").then(s.bind(null,"f1ee"))},data(){return{searchText:"",results:[]}},computed:{...Object(l["e"])("d2admin/search",["hotkey","pool"]),resultsList(){return 0===this.results.length&&""===this.searchText?this.pool.map(e=>({value:e.fullTitle,...e})):this.results},fuse(){return new i["a"](this.pool,{shouldSort:!0,tokenize:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["fullTitle","path"]})}},methods:{querySearch(e,t){const s=this.fuse.search(e).map(e=>e.item);this.results=s,t(s)},focus(){this.input="",setTimeout(()=>{this.$refs.input&&this.$refs.input.focus(),this.searchText="",this.results=[]},500)},handleResultsGroupItemClick(e){e!==this.$route.path?this.handleMenuSelect(e):this.handleEsc()},async handleSelect({path:e}){e!==this.$route.path?(await this.$nextTick(),this.handleMenuSelect(e)):this.handleEsc()},closeSuggestion(){this.$refs.input.activated&&(this.$refs.input.suggestions=[],this.$refs.input.activated=!1)},handlePanelClick(){this.handleEsc()},async handleEsc(){this.closeSuggestion(),await this.$nextTick(),this.$emit("close")}}},h=r,u=(s("b6fd"),s("e607")),o=function(e){e.options.__source="src/layout/header-aside/components/panel-search/index.vue"},p=o,d=Object(u["a"])(h,a,n,!1,null,"410be124",null);"function"===typeof p&&p(d);t["default"]=d.exports},b6fd:function(e,t,s){"use strict";s("fe1f")},fe1f:function(e,t,s){}}]);